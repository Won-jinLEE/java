<!doctype html>
<html>
<head>
<title>Connect Your Brain!!!</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="container">
	<div class="row justify-content-center">
		<div class="col-md-8">
			<br>
		    <div class="text-center">
			    <h2><a href="javascript:main();" style="text-decoration: none;">SGINSIDE</a></h2>
			</div>
			<div class="card">
		    	<div class="card-header text-center">
				    <!--UUID가 null일때 나오는놈-->
				    <div th:if="${session.uuid == null}">
				        <form class="form-inline" method="post" action="login">
				            <div style="display: flex; flex-direction: column; align-items: center;">
				                <div class="form-group" style="display: flex;">
				                    <input type="text" class="form-control" id="userId" name="userId" placeholder="아이디를 입력해주세요" style="font-size: 13px;">
				                    <button type="submit" class="btn btn-primary" onclick="return login();" style="font-size: 14px; width:125px; height:35px; margin-left: 5px;">로그인</button>
				                </div>
				                <div class="form-group" style="display: flex; margin-top: 5px;">
				                    <input type="password" class="form-control" id="password" name="password" placeholder="비밀번호를 입력해주세요" style="font-size: 13px; margin-top: 5px;">
				                    <button type="button" class="btn btn-primary" onclick="insert();" style="font-size: 14px; width:125px; height:35px; margin-left: 5px; margin-top: 5px;">회원가입</button>
				                </div>
				                <input type="hidden" id="url" name="url">
				            </div>
				        </form>
				    </div>
				    <!--UUID가 있을때 나오는놈-->
				    <div th:if="${session.uuid}">
				        <form class="form-inline" method="post" action="logout">
				            <div style="display: flex; flex-direction: column; align-items: center;">
								<h3 id="userNickname" th:text="${session.nickname} + '님 환영합니다'"></h3>
								<div class="form-group" style="margin-top: 2px;">
								    <button type="submit" class="btn btn-primary" onclick="return logout();">로그아웃</button>
								    <button type="button" class="btn btn-success" style="margin-left: 2px;" onclick="insert();">회원정보 변경</button>
								    <button type="button" th:if="${session.userType == 'admin'}" class="btn btn-dark" style="margin-left: 2px;" onclick="create();">갤러리 생성</button>
								</div>
				                <input type="hidden" id="url" name="url">
				                <input type="hidden" th:if="${session.userType == 'admin'}" id="bambooSpear" value="bambooSpear">
				            </div>
				        </form>
				    </div>
				</div>
			    <div class="card-body">
				    <form>
				    	<c:set var="galleryName" value="${name}" />
				    	<h2 th:text="${param.name} + ' 갤러리'"></h2>
						<select id="pagingLength" size="1" onchange="changeLength()">
							<option value="">선택하세요</option>
							<option value="5">5</option>
							<option value="10">10</option>
							<option value="20">20</option>
							<option value="50">50</option>
							<option value="100">100</option>
						</select>
						<input type="hidden" id="pagingLengthMan">
					    <div class="table-responsive">
					       <table class="table table-hover">
					          <thead>
					             <tr>
					                <th>글번호</th>
					                <th>제목</th>
					                <th>작성자</th>
					                <th>작성일</th>
					                <th>조회</th>
					                <th th:if="${session.userType == 'admin'}">글삭제</th>
					             </tr>
					          </thead>
					          <tbody id="postList">
					          </tbody>
					       </table>
					    </div>
					    <div style="text-align: center;">
<!--							<div th:each="index : ${#numbers.sequence(1, pageLength)}" th:if="${index != 1}">-->
<!--							    <span style="margin-right: 3px;"></span>-->
<!--							</div>-->

<!--				            <c:forEach begin="1" end="${pageLength}" varStatus="loop">-->
<!--				                <b><a href="javascript:pagingCheck(${loop.index})">${loop.index}</a></b>-->
<!--				                <c:if test="${not loop.last}">  마지막 인덱스가 아닌 경우에만 간격을 줌 -->
<!--				                    <span style="margin-right: 3px;"></span>-->
<!--				                </c:if>-->
<!--				            </c:forEach>-->
				        </div>
					 </form>
				 </div>
				<div class="card-footer">
				   <div class="form-group" style="margin-right: 10px;">
					 <button type="button" class="btn btn-primary" onclick="post();" style="font-size: 14px; width:75px; height:35px;">글작성</button>
				   </div>
				   <div style="display: flex; justify-content: center;">
					   <form class="form-inline" action="gallPage.do" method="POST">
					      <div class="form-group" style="display: flex; margin-top: 5px;">
					         <input type="text" class="form-control" id="searchKeyword" name="searchKeyword" placeholder="글 제목을 입력해주세요" style="font-size: 14px; height:35px; margin-left: 2px;">
					         <button type="submit" class="btn btn-primary" style="font-size: 14px; width:75px; height:35px; margin-left: 2px;">검색</button>
					         <input type="hidden" id="idx" name="idx" value="<%= gallIdx %>">
					         <input type="hidden" id="name" name="name" value="<%= gallName %>">
					      </div>
					   </form>
				   </div>
				</div>
		    </div>
		</div>		
	</div>
</div>
<script src="/js/gallPage.js"></script>
</body>
</html>